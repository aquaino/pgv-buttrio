{% macro render_users_table(title, users) %}
  <h4 class="border-start border-primary border-4 ps-2 mt-4">{{ title }}</h4>
  {% set headers = ["Cognome", "Nome", "Genere", "Nato a", "Nato il", "CAP", "CittÃ ", "Indirizzo", "Email 1", "Email 2", "Tel 1", "Tel 2", "Note"] %}
  <div class="mx-auto mt-3">
    <div class="table-responsive">
      {% set table_id = title.replace(" ", "-").lower() + "-table" %}
      <table id="{{ table_id }}" class="table table-striped table-sm">
        <thead>
          <tr>
            {% for header in headers%}
              <th>{{ header }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td>{{ user.lastname }}</td>
            <td>{{ user.firstname }}</td>
            <td>{{ user.gender }}</td>
            <td>{{ user.born_on }}</td>
            <td>{{ user.born_in }}</td>
            <td>{{ user.zip }}</td>
            <td>{{ user.city }}</td>
            <td>{{ user.address }}</td>
            <td>{{ user.email1 }}</td>
            <td>{{ user.email2 }}</td>
            <td>{{ user.tel1 }}</td>
            <td>{{ user.tel2 }}</td>
            <td>{{ user.notes }}</td>
          </tr>
          {% endfor %}</tbody>
      </table>
      <script>
        $(document).ready(function() {
          var table = $("#{{ table_id }}").DataTable({
            "pageLength": 20,
          });
        });
      </script>
    </div>
  </div>
{% endmacro %}

{% macro render_events_table(title, events) %}
  <h4 class="border-start border-primary border-4 ps-2 mt-4">{{ title }}</h4>
  {% set headers = ["Categoria Libro Verde", "Evento", "Descrizione"] %}
  <div class="mx-auto mt-3">
    <div class="table-responsive">
      {% set table_id = title.replace(" ", "-").lower() + "-table" %}
      <table id="{{ table_id }}" class="table table-sm">
        <thead>
          <tr>
            {% for header in headers%}
              <th>{{ header }}</th>
            {% endfor %}
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for event in events %}
          <tr>
            <td>{{ event.cat_name }}</td>
            <td>{{ event.name }}</td>
            <td>{{ event.descr }}</td>
            <td class="text-center text-primary">
              <a class="me-1" href="{{ url_for('events.update_event', event_id=event.id) }}" title="Modifica"><i class="bi bi-gear-fill"></i></a>
              <a class="me-1" href="{{ url_for('events.duplicate_event', event_id=event.id) }}" title="Duplica"><i class="bi bi-file-earmark-plus-fill"></i></a>
              <a class="me-1" href="{{ url_for('events.delete_event', event_id=event.id) }}" title="Elimina"><i class="bi bi-trash-fill"></i></a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <script>
        $(document).ready(function() {
          var table = $("#{{ table_id }}").DataTable({
            "pageLength": 25,
            "columnDefs": [
              { "targets": [3], "orderable": false }
            ]
          });
        });
      </script>
    </div>
  </div>
{% endmacro %}
